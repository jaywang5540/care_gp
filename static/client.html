<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicare GP Assistant - ä¸“ä¸šç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #0066cc;
            --primary-hover: #0052a3;
            --success-color: #00a651;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .app-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .navbar {
            background: var(--card-bg);
            border-bottom: 2px solid var(--primary-color);
            padding: 0.75rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        /* å·¦ä¾§æ­¥éª¤æ  */
        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }
        
        .sidebar-header {
            padding: 1.5rem 1.25rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .sidebar-title {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }
        
        .sidebar-steps {
            flex: 1;
            padding: 1rem 0;
        }
        
        .sidebar-step {
            display: flex;
            align-items: center;
            padding: 0.875rem 1.25rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .sidebar-step:hover {
            background: var(--bg-color);
        }
        
        .sidebar-step::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: transparent;
            transition: all 0.3s;
        }
        
        .sidebar-step.active::before {
            background: var(--primary-color);
        }
        
        .sidebar-step.completed::before {
            background: var(--success-color);
        }
        
        .sidebar-step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-color);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            margin-right: 1rem;
            transition: all 0.3s;
        }
        
        .sidebar-step.active .sidebar-step-number {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .sidebar-step.completed .sidebar-step-number {
            background: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }
        
        .sidebar-step.completed .sidebar-step-number {
            font-size: 0;
        }
        
        .sidebar-step.completed .sidebar-step-number::after {
            content: 'âœ“';
            font-size: 1.1rem;
        }
        
        .sidebar-step-content {
            flex: 1;
        }
        
        .sidebar-step-title {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .sidebar-step-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .sidebar-step.active .sidebar-step-title {
            color: var(--primary-color);
        }
        
        .sidebar-step.completed .sidebar-step-title {
            color: var(--success-color);
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .navbar-brand .logo {
            width: 32px;
            height: 32px;
            background: var(--primary-color);
            color: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }
        
        .navbar-info {
            display: flex;
            gap: 2rem;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        
        /* ä¸»å†…å®¹åŒº */
        .main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .content-wrapper {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            overflow-x: hidden;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }
        
        .step-content {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .step-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .card-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border-color);
            background: linear-gradient(135deg, #f5f7fa 0%, #ffffff 100%);
        }
        
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .card-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .card-body {
            padding: 1.25rem;
        }
        
        /* Step 1: è¯Šç–—è®°å½• */
        .patient-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 1.25rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .patient-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .patient-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .patient-details {
            opacity: 0.9;
        }
        
        .input-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: var(--primary-color);
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }
        
        .consultation-textarea {
            width: 100%;
            min-height: 200px;
            max-height: 300px;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.95rem;
            resize: vertical;
            transition: all 0.3s;
        }
        
        .consultation-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }
        
        .voice-panel {
            display: none;
            text-align: center;
            padding: 3rem;
        }
        
        .voice-panel.active {
            display: block;
        }
        
        .record-button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--danger-color);
            color: white;
            border: none;
            font-size: 3rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 1.5rem;
        }
        
        .record-button:hover {
            transform: scale(1.05);
        }
        
        .record-button.recording {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4); }
            70% { box-shadow: 0 0 0 30px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }
        
        .meta-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        .form-control {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }
        
        /* Step 2: æ™ºèƒ½åˆ†æ */
        .analysis-result {
            margin-bottom: 2rem;
        }
        
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .tag {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .tag.symptom {
            background: #fff3cd;
            color: #856404;
        }
        
        .tag.diagnosis {
            background: #cfe2ff;
            color: #084298;
        }
        
        .tag.treatment {
            background: #d1e7dd;
            color: #0f5132;
        }
        
        .mbs-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .mbs-item {
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .mbs-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .mbs-item.selected {
            border-color: var(--success-color);
            background: #f0fdf4;
        }
        
        .mbs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .mbs-code {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.125rem;
        }
        
        .mbs-price {
            font-weight: 600;
            font-size: 1.125rem;
        }
        
        .mbs-description {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .confidence-meter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .confidence-bar {
            flex: 1;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #00a651, #00c851);
            transition: width 0.3s;
        }
        
        .mbs-checkbox {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mbs-item.selected .mbs-checkbox {
            background: var(--success-color);
            border-color: var(--success-color);
        }
        
        .mbs-item.selected .mbs-checkbox::after {
            content: 'âœ“';
            color: white;
        }
        
        /* Step 3: ç¡®è®¤è´¦å• */
        .billing-summary {
            background: linear-gradient(135deg, #f5f7fa 0%, #ffffff 100%);
            padding: 1.25rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .billing-line {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .billing-line:last-child {
            border-bottom: none;
            font-size: 1.25rem;
            font-weight: 600;
            padding-top: 1rem;
            margin-top: 0.5rem;
            border-top: 2px solid var(--primary-color);
        }
        
        .selected-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .selected-item {
            padding: 1rem;
            background: var(--bg-color);
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* Step 4: ç”Ÿæˆæ–‡æ¡£ */
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .doc-card {
            padding: 1.25rem;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .doc-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .doc-card.generated {
            border-color: var(--success-color);
            background: #f0fdf4;
        }
        
        .doc-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .doc-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .doc-status {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .doc-card.generated .doc-status {
            color: var(--success-color);
        }
        
        /* æ­¥éª¤å†…æ“ä½œæŒ‰é’® */
        .step-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        
        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: white;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover:not(:disabled) {
            background: var(--bg-color);
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.2);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-success:hover:not(:disabled) {
            background: #008a41;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 166, 81, 0.2);
        }
        
        .step-info {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .loading-overlay.active {
            display: flex;
        }
        
        .loading-content {
            background: white;
            padding: 2rem 3rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--border-color);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="navbar">
        <div class="navbar-brand">
            <div class="logo">ğŸ¥</div>
            <span>Medicare GP Assistant</span>
        </div>
        <div class="navbar-info">
            <span>ğŸ‘¤ Dr. Smith (Provider: 0000001A)</span>
            <span>ğŸ“… 2024å¹´1æœˆ15æ—¥</span>
        </div>
    </nav>
    
    <!-- åº”ç”¨ä¸»ä½“ -->
    <div class="app-container">
        <!-- å·¦ä¾§æ­¥éª¤æ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">è¯Šç–—æµç¨‹</div>
            </div>
            <div class="sidebar-steps">
                <div class="sidebar-step active" data-step="1">
                    <div class="sidebar-step-number">1</div>
                    <div class="sidebar-step-content">
                        <div class="sidebar-step-title">è®°å½•è¯Šç–—</div>
                        <div class="sidebar-step-desc">è¾“å…¥æ‚£è€…è¯Šç–—ä¿¡æ¯</div>
                    </div>
                </div>
                <div class="sidebar-step" data-step="2">
                    <div class="sidebar-step-number">2</div>
                    <div class="sidebar-step-content">
                        <div class="sidebar-step-title">æ™ºèƒ½åˆ†æ</div>
                        <div class="sidebar-step-desc">AIæ¨èMBSé¡¹ç›®</div>
                    </div>
                </div>
                <div class="sidebar-step" data-step="3">
                    <div class="sidebar-step-number">3</div>
                    <div class="sidebar-step-content">
                        <div class="sidebar-step-title">ç¡®è®¤è´¦å•</div>
                        <div class="sidebar-step-desc">å®¡æ ¸å¹¶ç¡®è®¤è´¹ç”¨</div>
                    </div>
                </div>
                <div class="sidebar-step" data-step="4">
                    <div class="sidebar-step-number">4</div>
                    <div class="sidebar-step-content">
                        <div class="sidebar-step-title">ç”Ÿæˆæ–‡æ¡£</div>
                        <div class="sidebar-step-desc">åˆ›å»ºå¿…è¦æ–‡æ¡£</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-container">
            <div class="content-wrapper">
        <!-- Step 1: è®°å½•è¯Šç–— -->
        <div class="step-content active" id="step-1-content">
            <div class="patient-banner">
                <div class="patient-info">
                    <div>
                        <div class="patient-name">å¼ æ˜ (Zhang Ming)</div>
                        <div class="patient-details">45å² ç”·æ€§ | Medicare: 1234567890 | è”ç³»ç”µè¯: 0412 345 678</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 0.875rem; opacity: 0.9;">ä¸Šæ¬¡å°±è¯Š</div>
                        <div style="font-weight: 600;">2023å¹´12æœˆ20æ—¥</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">è¯Šç–—è®°å½•</h2>
                    <p class="card-subtitle">è¯·è¯¦ç»†è®°å½•æœ¬æ¬¡è¯Šç–—å†…å®¹ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è¯†åˆ«å…³é”®ä¿¡æ¯</p>
                </div>
                <div class="card-body">
                    <div class="input-tabs">
                        <button class="tab active" onclick="switchTab('text')">æ–‡æœ¬è¾“å…¥</button>
                        <button class="tab" onclick="switchTab('voice')">è¯­éŸ³è¾“å…¥</button>
                    </div>
                    
                    <div id="text-panel">
                        <textarea class="consultation-textarea" 
                                  placeholder="è¯·è¾“å…¥è¯Šç–—å†…å®¹...&#10;&#10;å»ºè®®åŒ…å«ï¼š&#10;â€¢ ä¸»è¯‰ç—‡çŠ¶&#10;â€¢ ä½“æ ¼æ£€æŸ¥&#10;â€¢ è¯Šæ–­ç»“æœ&#10;â€¢ æ²»ç–—æ–¹æ¡ˆ&#10;â€¢ è¯Šç–—æ—¶é•¿"
                                  id="consultation-text"></textarea>
                    </div>
                    
                    <div class="voice-panel" id="voice-panel">
                        <button class="record-button" onclick="toggleRecording()">
                            ğŸ¤
                        </button>
                        <h3>ç‚¹å‡»å¼€å§‹å½•éŸ³</h3>
                        <p style="color: var(--text-secondary);">ç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢è¯­éŸ³ä¸ºæ–‡æœ¬ï¼Œæ”¯æŒåŒ»å­¦æœ¯è¯­è¯†åˆ«</p>
                    </div>
                    
                    <div class="meta-fields">
                        <div class="form-group">
                            <label class="form-label">è¯Šç–—æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</label>
                            <input type="number" class="form-control" value="15" id="duration">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è¯Šç–—ç±»å‹</label>
                            <select class="form-control" id="consultation-type">
                                <option value="standard">æ ‡å‡†è¯Šç–—</option>
                                <option value="long">é•¿æ—¶è¯Šç–—</option>
                                <option value="mental">å¿ƒç†å¥åº·è¯„ä¼°</option>
                                <option value="chronic">æ…¢æ€§ç—…ç®¡ç†</option>
                                <option value="urgent">ç´§æ€¥è¯Šç–—</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- æ­¥éª¤æ“ä½œæŒ‰é’® -->
                    <div class="step-actions">
                        <button class="btn btn-primary" onclick="nextStep()">
                            ä¸‹ä¸€æ­¥ï¼šæ™ºèƒ½åˆ†æ
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Step 2: æ™ºèƒ½åˆ†æ -->
        <div class="step-content" id="step-2-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">æ™ºèƒ½åˆ†æç»“æœ</h2>
                    <p class="card-subtitle">ç³»ç»Ÿå·²è¯†åˆ«å…³é”®ä¿¡æ¯å¹¶æ¨èåˆé€‚çš„MBSé¡¹ç›®</p>
                </div>
                <div class="card-body">
                    <div class="analysis-result">
                        <h3 style="margin-bottom: 1rem;">è¯†åˆ«çš„å…³é”®ä¿¡æ¯</h3>
                        <div class="tags-container">
                            <span class="tag symptom">ğŸ¤’ å¤´ç—›</span>
                            <span class="tag symptom">ğŸ©¸ è¡€å‹åé«˜</span>
                            <span class="tag diagnosis">ğŸ“‹ ç´§å¼ æ€§å¤´ç—›</span>
                            <span class="tag diagnosis">ğŸ“‹ é«˜è¡€å‹</span>
                            <span class="tag treatment">ğŸ’Š æ‰‘çƒ­æ¯ç—›</span>
                            <span class="tag treatment">ğŸ“… 2å‘¨å¤æŸ¥</span>
                        </div>
                    </div>
                    
                    <div class="analysis-result">
                        <h3 style="margin-bottom: 1rem;">æ¨èçš„MBSé¡¹ç›®</h3>
                        <div class="mbs-list">
                            <div class="mbs-item selected" onclick="toggleMBS(this)">
                                <div class="mbs-checkbox"></div>
                                <div class="mbs-header">
                                    <span class="mbs-code">é¡¹ç›® 23</span>
                                    <span class="mbs-price">$40.85</span>
                                </div>
                                <div class="mbs-description">Level B æ ‡å‡†è¯Šç–—ï¼ˆ6-20åˆ†é’Ÿï¼‰</div>
                                <div class="confidence-meter">
                                    <span style="font-size: 0.875rem;">æ¨èç½®ä¿¡åº¦</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 95%"></div>
                                    </div>
                                    <span style="font-weight: 600;">95%</span>
                                </div>
                            </div>
                            
                            <div class="mbs-item" onclick="toggleMBS(this)">
                                <div class="mbs-checkbox"></div>
                                <div class="mbs-header">
                                    <span class="mbs-code">é¡¹ç›® 10997</span>
                                    <span class="mbs-price">$137.95</span>
                                </div>
                                <div class="mbs-description">ç´§æ€¥ä¸‹ç­åè¯Šç–—</div>
                                <div class="confidence-meter">
                                    <span style="font-size: 0.875rem;">æ¨èç½®ä¿¡åº¦</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 30%"></div>
                                    </div>
                                    <span style="font-weight: 600;">30%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ­¥éª¤æ“ä½œæŒ‰é’® -->
                    <div class="step-actions">
                        <button class="btn btn-secondary" onclick="previousStep()">
                            ä¸Šä¸€æ­¥
                        </button>
                        <button class="btn btn-primary" onclick="nextStep()">
                            ä¸‹ä¸€æ­¥ï¼šç¡®è®¤è´¦å•
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Step 3: ç¡®è®¤è´¦å• -->
        <div class="step-content" id="step-3-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">è´¦å•ç¡®è®¤</h2>
                    <p class="card-subtitle">è¯·ç¡®è®¤è´¦å•ä¿¡æ¯æ— è¯¯åæäº¤</p>
                </div>
                <div class="card-body">
                    <div class="billing-summary">
                        <div class="billing-line">
                            <span>è¯Šç–—é¡¹ç›®</span>
                            <span>Level B (é¡¹ç›®23)</span>
                        </div>
                        <div class="billing-line">
                            <span>æ ‡å‡†è´¹ç”¨</span>
                            <span>$40.85</span>
                        </div>
                        <div class="billing-line">
                            <span>Medicareè¡¥è´´ (100%)</span>
                            <span>$40.85</span>
                        </div>
                        <div class="billing-line">
                            <span>æ‚£è€…è‡ªä»˜</span>
                            <span>$0.00</span>
                        </div>
                        <div class="billing-line">
                            <strong>åº”æ”¶æ€»é¢</strong>
                            <strong>$40.85</strong>
                        </div>
                    </div>
                    
                    <h3 style="margin: 2rem 0 1rem;">é€‰ä¸­çš„MBSé¡¹ç›®</h3>
                    <div class="selected-items">
                        <div class="selected-item">
                            <div>
                                <strong>é¡¹ç›® 23</strong> - Level B æ ‡å‡†è¯Šç–—
                            </div>
                            <strong>$40.85</strong>
                        </div>
                    </div>
                    
                    <div style="background: #fef3c7; padding: 1rem; border-radius: 6px; margin-top: 2rem;">
                        <strong style="color: #92400e;">âš ï¸ åˆè§„æé†’</strong>
                        <p style="margin-top: 0.5rem; color: #92400e;">è¯¥æ‚£è€…24å°æ—¶å†…æ— é‡å¤æ”¶è´¹è®°å½•ï¼Œç¬¦åˆMedicareè§„å®š</p>
                    </div>
                    
                    <!-- æ­¥éª¤æ“ä½œæŒ‰é’® -->
                    <div class="step-actions">
                        <button class="btn btn-secondary" onclick="previousStep()">
                            ä¸Šä¸€æ­¥
                        </button>
                        <button class="btn btn-primary" onclick="nextStep()">
                            ä¸‹ä¸€æ­¥ï¼šç”Ÿæˆæ–‡æ¡£
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Step 4: ç”Ÿæˆæ–‡æ¡£ -->
        <div class="step-content" id="step-4-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">æ–‡æ¡£ç”Ÿæˆ</h2>
                    <p class="card-subtitle">é€‰æ‹©éœ€è¦ç”Ÿæˆçš„æ–‡æ¡£ï¼Œç‚¹å‡»å³å¯åˆ›å»º</p>
                </div>
                <div class="card-body">
                    <div class="documents-grid">
                        <div class="doc-card" onclick="generateDoc(this, 'claim')">
                            <div class="doc-icon">ğŸ“‹</div>
                            <div class="doc-title">Medicareè´¦å•</div>
                            <div class="doc-status">ç‚¹å‡»ç”Ÿæˆ</div>
                        </div>
                        
                        <div class="doc-card" onclick="generateDoc(this, 'summary')">
                            <div class="doc-icon">ğŸ“„</div>
                            <div class="doc-title">è¯Šç–—æ‘˜è¦</div>
                            <div class="doc-status">ç‚¹å‡»ç”Ÿæˆ</div>
                        </div>
                        
                        <div class="doc-card" onclick="generateDoc(this, 'referral')">
                            <div class="doc-icon">âœ‰ï¸</div>
                            <div class="doc-title">è½¬è¯Šä¿¡</div>
                            <div class="doc-status">ç‚¹å‡»ç”Ÿæˆ</div>
                        </div>
                        
                        <div class="doc-card" onclick="generateDoc(this, 'care-plan')">
                            <div class="doc-icon">ğŸ“Š</div>
                            <div class="doc-title">æŠ¤ç†è®¡åˆ’</div>
                            <div class="doc-status">ç‚¹å‡»ç”Ÿæˆ</div>
                        </div>
                        
                        <div class="doc-card" onclick="generateDoc(this, 'prescription')">
                            <div class="doc-icon">ğŸ’Š</div>
                            <div class="doc-title">å¤„æ–¹å•</div>
                            <div class="doc-status">ç‚¹å‡»ç”Ÿæˆ</div>
                        </div>
                        
                        <div class="doc-card" onclick="generateDoc(this, 'certificate')">
                            <div class="doc-icon">ğŸ¥</div>
                            <div class="doc-title">ç—…å‡è¯æ˜</div>
                            <div class="doc-status">ç‚¹å‡»ç”Ÿæˆ</div>
                        </div>
                    </div>
                    
                    <!-- æ­¥éª¤æ“ä½œæŒ‰é’® -->
                    <div class="step-actions">
                        <button class="btn btn-secondary" onclick="previousStep()">
                            ä¸Šä¸€æ­¥
                        </button>
                        <button class="btn btn-success" onclick="complete()">
                            å®Œæˆå¹¶æäº¤
                        </button>
                    </div>
                </div>
            </div>
        </div>
        </div> <!-- å…³é—­ content-wrapper -->
        </div> <!-- å…³é—­ main-container -->
    </div> <!-- å…³é—­ app-container -->
    
    <!-- åŠ è½½é®ç½© -->
    <div class="loading-overlay" id="loading">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>æ­£åœ¨å¤„ç†ï¼Œè¯·ç¨å€™...</p>
        </div>
    </div>
    
    <script>
        let currentStep = 1;
        const totalSteps = 4;
        let consultationData = {};
        let selectedMBS = ['23'];
        
        // åˆ‡æ¢è¾“å…¥æ¨¡å¼
        function switchTab(mode) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            if (mode === 'text') {
                document.getElementById('text-panel').style.display = 'block';
                document.getElementById('voice-panel').classList.remove('active');
            } else {
                document.getElementById('text-panel').style.display = 'none';
                document.getElementById('voice-panel').classList.add('active');
            }
        }
        
        // å½•éŸ³æ§åˆ¶
        let isRecording = false;
        function toggleRecording() {
            const btn = event.target;
            isRecording = !isRecording;
            
            if (isRecording) {
                btn.classList.add('recording');
                btn.innerHTML = 'â¹ï¸';
                // æ¨¡æ‹Ÿ3ç§’åè‡ªåŠ¨åœæ­¢
                setTimeout(() => {
                    if (isRecording) {
                        btn.classList.remove('recording');
                        btn.innerHTML = 'ğŸ¤';
                        isRecording = false;
                        
                        // æ¨¡æ‹Ÿè¯­éŸ³è½¬æ–‡æœ¬
                        document.getElementById('consultation-text').value = 
                            "æ‚£è€…ä¸»è¯‰å¤´ç—›3å¤©ï¼Œç–¼ç—›ä¸ºæåŠ¨æ€§ï¼Œä½äºå‰é¢éƒ¨ã€‚æ— å‘çƒ­ï¼Œæ— æ¶å¿ƒå‘•åã€‚" +
                            "è¡€å‹æµ‹é‡140/90 mmHgï¼Œåé«˜ã€‚æ—¢å¾€æœ‰é«˜è¡€å‹ç—…å²ã€‚" +
                            "è¯Šæ–­ï¼šç´§å¼ æ€§å¤´ç—›ï¼Œé«˜è¡€å‹ã€‚" +
                            "å¤„æ–¹ï¼šæ‰‘çƒ­æ¯ç—›ï¼Œå»ºè®®2å‘¨åå¤æŸ¥è¡€å‹ã€‚";
                        
                        // åˆ‡å›æ–‡æœ¬æ¨¡å¼
                        document.getElementById('text-panel').style.display = 'block';
                        document.getElementById('voice-panel').classList.remove('active');
                        document.querySelectorAll('.tab')[0].classList.add('active');
                        document.querySelectorAll('.tab')[1].classList.remove('active');
                    }
                }, 3000);
            } else {
                btn.classList.remove('recording');
                btn.innerHTML = 'ğŸ¤';
            }
        }
        
        // åˆ‡æ¢MBSé¡¹ç›®é€‰æ‹©
        function toggleMBS(element) {
            element.classList.toggle('selected');
        }
        
        // ç”Ÿæˆæ–‡æ¡£
        function generateDoc(element, type) {
            if (element.classList.contains('generated')) return;
            
            // æ˜¾ç¤ºåŠ è½½
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                element.classList.add('generated');
                element.querySelector('.doc-status').textContent = 'âœ“ å·²ç”Ÿæˆ';
                element.querySelector('.doc-status').style.color = 'var(--success-color)';
            }, 1000);
        }
        
        // ä¸‹ä¸€æ­¥
        function nextStep() {
            if (currentStep === 1) {
                // éªŒè¯è¾“å…¥
                const text = document.getElementById('consultation-text').value;
                if (!text) {
                    alert('è¯·å…ˆè¾“å…¥è¯Šç–—å†…å®¹');
                    return;
                }
                
                // ä¿å­˜æ•°æ®
                consultationData = {
                    text: text,
                    duration: document.getElementById('duration').value,
                    type: document.getElementById('consultation-type').value
                };
                
                // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
                showLoading();
                
                // æ¨¡æ‹Ÿåˆ†æ
                setTimeout(() => {
                    hideLoading();
                    goToStep(2);
                }, 1500);
            } else if (currentStep === 2) {
                goToStep(3);
            } else if (currentStep === 3) {
                goToStep(4);
            }
        }
        
        // ä¸Šä¸€æ­¥
        function previousStep() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            }
        }
        
        // è·³è½¬åˆ°æŒ‡å®šæ­¥éª¤
        function goToStep(step) {
            // éšè—å½“å‰æ­¥éª¤å†…å®¹
            document.getElementById(`step-${currentStep}-content`).classList.remove('active');
            
            // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
            document.querySelector(`.sidebar-step[data-step="${currentStep}"]`).classList.remove('active');
            if (step > currentStep) {
                document.querySelector(`.sidebar-step[data-step="${currentStep}"]`).classList.add('completed');
            }
            
            // æ˜¾ç¤ºæ–°æ­¥éª¤å†…å®¹
            currentStep = step;
            document.getElementById(`step-${currentStep}-content`).classList.add('active');
            document.querySelector(`.sidebar-step[data-step="${currentStep}"]`).classList.add('active');
        }
        
        // å®Œæˆæäº¤
        function complete() {
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                alert('âœ… è´¦å•å·²æˆåŠŸæäº¤åˆ°Medicareç³»ç»Ÿï¼');
                
                // é‡ç½®è¡¨å•
                location.reload();
            }, 2000);
        }
        
        // æ˜¾ç¤ºåŠ è½½
        function showLoading() {
            document.getElementById('loading').classList.add('active');
        }
        
        // éšè—åŠ è½½
        function hideLoading() {
            document.getElementById('loading').classList.remove('active');
        }
        
        // ç‚¹å‡»æ­¥éª¤æŒ‡ç¤ºå™¨è·³è½¬ï¼ˆä»…å…è®¸è·³è½¬åˆ°å·²å®Œæˆçš„æ­¥éª¤ï¼‰
        document.querySelectorAll('.step').forEach(step => {
            step.addEventListener('click', function() {
                const targetStep = parseInt(this.dataset.step);
                if (this.classList.contains('completed') || targetStep < currentStep) {
                    goToStep(targetStep);
                }
            });
        });
        
        // ä¸ºæ­¥éª¤æŒ‡ç¤ºå™¨æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.sidebar-step').forEach(step => {
            step.addEventListener('click', function() {
                const targetStep = parseInt(this.dataset.step);
                if (targetStep <= currentStep || targetStep === currentStep + 1) {
                    goToStep(targetStep);
                }
            });
        });
    </script>
</body>
</html>